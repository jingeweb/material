"use strict";(self.webpackChunkjinge_material_site=self.webpackChunkjinge_material_site||[]).push([[7574],{4211:(e,t,n)=>{n.r(t),n.d(t,{PagePopconfirm:()=>h});var o=n(4114),r=n(7421),s=n(7683),c=n(8317),i=n(6578),a=n(6488),_=n(8279),l=n(4566);class p extends o.wA{constructor(e){super(e);const t=this[o.$$].proxy,n=()=>{t.title=e.title||""};n(),e[o.$$].__watch("title",n);const r=()=>{t.error=e.errorTip};r(),e[o.$$].__watch("errorTip",r);const s=()=>{t.placement=e.placement||"top-end"};s(),e[o.$$].__watch("placement",s);const c=()=>{t.active=e.active};c(),e[o.$$].__watch("active",c);const a=()=>{t.trigger=e.trigger||"click"};a(),e[o.$$].__watch("trigger",a);const _=()=>{t.delay=e.delay};_(),e[o.$$].__watch("delay",_);const l=()=>{t.offset=e.offset||16};l(),e[o.$$].__watch("offset",l);const p=()=>{t.closeOnOutsideClick=!1!==e.closeOnOutsideClick};p(),e[o.$$].__watch("closeOnOutsideClick",p);const d=()=>{t.transition=e.transition};d(),e[o.$$].__watch("transition",d),t._popperOptions=e._popperOptions;const u=()=>{t.confirmText=e.confirmText};u(),e[o.$$].__watch("confirmText",u);const h=()=>{t.cancelText=e.cancelText};h(),e[o.$$].__watch("cancelText",h);const m=()=>{t.confirmSpinner=e.confirmSpinner};m(),e[o.$$].__watch("confirmSpinner",m);const f=()=>{t.hideWhenConfirmClick=!1!==e.hideWhenConfirmClick};f(),e[o.$$].__watch("hideWhenConfirmClick",f),t._localeChangeHandler=t._onLocaleChange.bind(t),t.locale=(0,i.I_)(t._localeChangeHandler)}_onLocaleChange(e){this.locale=e}onUpdateActive(e){this.active=e,this.__notify("update.active",e)}onConfirm(){this.__notify("confirm"),this.hideWhenConfirmClick&&(this.active=!1,this.__notify("update.active",!1,"confirm"))}onCancel(){this.active=!1,this.__notify("cancel"),this.__notify("update.active",!1,"cancel")}}p.template=function(e){const t=e;return[...(()=>{const n=(0,o.Qb)({[o.__]:{context:e[o.__].context,listeners:{"update.active":{fn:function(...e){t.onUpdateActive(...e)},opts:null}},slots:{default:function(e){return[...(()=>{const n=t[o.__].slots,r=n&&n.default?n.default:null,s=(0,o.Qb)({[o.__]:{context:e[o.__].context,slots:{default:r||o.qO}}}),c=new o.gU(s,[])[o.$$].proxy;return e[o.__].rootNodes.push(c),(0,o.KO)(c.__render())})()]},content:function(e){return[...(()=>{const n=t[o.__].slots,r=n&&n.content?n.content:function(e){return[(()=>{const n=(0,o.az)("div",{class:"md-popover-content"},(0,o.az)("div",{class:"title"},(()=>{const n=(0,o.Eg)(),r=()=>{(0,o.Hd)(n,t.title)};return r(),t[o.$$].__watch(["title"],r,e[o.$$]),n})()),...(()=>{const n=(0,o.Qb)({[o.__]:{context:e[o.__].context,slots:{default:function(e){return[(()=>{const n=(0,o.az)("div",{class:"error"},(()=>{const n=(0,o.Eg)(),r=()=>{(0,o.Hd)(n,t.error)};return r(),t[o.$$].__watch(["error"],r,e[o.$$]),n})());return e[o.__].rootNodes.push(n),n})()]}}},expect:void 0}),r=()=>{n.expect=t.error};r(),t[o.$$].__watch(["error"],r,e[o.$$]);const s=o.uj.create(n);return e[o.__].nonRootCompNodes.push(s),(0,o.KO)(s.__render())})());return e[o.__].rootNodes.push(n),n})()]},s=(0,o.Qb)({[o.__]:{context:e[o.__].context,slots:{default:r||o.qO}}}),c=new o.gU(s,[])[o.$$].proxy;return e[o.__].rootNodes.push(c),(0,o.KO)(c.__render())})(),...(()=>{const n=t[o.__].slots,r=n&&n.ctrl?n.ctrl:function(e){return[(()=>{const n=(0,o.az)("div",{class:"md-popover-ctrl"},...(()=>{const n=(0,o.Qb)({[o.__]:{context:e[o.__].context,listeners:{click:{fn:function(...e){t.onCancel(...e)},opts:null}},slots:{default:function(e){return[(()=>{const n=(0,o.Eh)("span",(()=>{const n=(0,o.Eg)(),r=()=>{(0,o.Hd)(n,t.cancelText||t.locale?.Cancel)};return r(),t[o.$$].__watch(["cancelText"],r,e[o.$$]),t[o.$$].__watch(["locale","Cancel"],r,e[o.$$]),n})());return e[o.__].rootNodes.push(n),n})()]}}},disabled:void 0}),r=()=>{n.disabled=t.confirmSpinner};r(),t[o.$$].__watch(["confirmSpinner"],r,e[o.$$]);const s=_.z.create(n);return e[o.__].nonRootCompNodes.push(s),(0,o.KO)(s.__render())})(),...(()=>{const n=(0,o.Qb)({[o.__]:{context:e[o.__].context,listeners:{click:{fn:function(...e){t.onConfirm(...e)},opts:null}},slots:{default:function(e){return[...(()=>{const n=(0,o.Qb)({[o.__]:{context:e[o.__].context,slots:{default:function(e){return[...(()=>{const t=(0,o.Qb)({[o.__]:{context:e[o.__].context}}),n=l.$.create(t);return e[o.__].rootNodes.push(n),(0,o.KO)(n.__render())})()]}}},expect:void 0}),r=()=>{n.expect=t.confirmSpinner};r(),t[o.$$].__watch(["confirmSpinner"],r,e[o.$$]);const s=o.uj.create(n);return e[o.__].rootNodes.push(s),(0,o.KO)(s.__render())})(),(()=>{const n=(0,o.Eh)("span",(()=>{const n=(0,o.Eg)(),r=()=>{(0,o.Hd)(n,t.confirmText||t.locale?.Ok)};return r(),t[o.$$].__watch(["confirmText"],r,e[o.$$]),t[o.$$].__watch(["locale","Ok"],r,e[o.$$]),n})());return e[o.__].rootNodes.push(n),n})()]}}},disabled:void 0,class:"md-primary"}),r=()=>{n.disabled=t.confirmSpinner};r(),t[o.$$].__watch(["confirmSpinner"],r,e[o.$$]);const s=_.z.create(n);return e[o.__].nonRootCompNodes.push(s),(0,o.KO)(s.__render())})());return e[o.__].rootNodes.push(n),n})()]},s=(0,o.Qb)({[o.__]:{context:e[o.__].context,slots:{default:r||o.qO}}}),c=new o.gU(s,[])[o.$$].proxy;return e[o.__].rootNodes.push(c),(0,o.KO)(c.__render())})()]}}},trigger:void 0,active:void 0,transition:void 0,placement:void 0,offset:void 0,delay:void 0,closeOnOutsideClick:void 0,class:void 0,_popperOptions:t._popperOptions}),r=()=>{n.trigger=t.trigger};r(),t[o.$$].__watch(["trigger"],r,e[o.$$]);const s=()=>{n.active=t.active};s(),t[o.$$].__watch(["active"],s,e[o.$$]);const c=()=>{n.transition=t.transition};c(),t[o.$$].__watch(["transition"],c,e[o.$$]);const i=()=>{n.placement=t.placement};i(),t[o.$$].__watch(["placement"],i,e[o.$$]);const p=()=>{n.offset=t.offset};p(),t[o.$$].__watch(["offset"],p,e[o.$$]);const d=()=>{n.delay=t.delay};d(),t[o.$$].__watch(["delay"],d,e[o.$$]);const u=()=>{n.closeOnOutsideClick=!t.confirmSpinner&&t.closeOnOutsideClick};u(),t[o.$$].__watch(["confirmSpinner"],u,e[o.$$]),t[o.$$].__watch(["closeOnOutsideClick"],u,e[o.$$]);const h=()=>{n.class=(0,o.SK)((0,o.vm)(["md-popconfirm",t.class]))};h(),t[o.$$].__watch(["class"],h,e[o.$$]);const m=a.J.create(n);return e[o.__].rootNodes.push(m),(0,o.KO)(m.__render())})()]};class d extends o.wA{constructor(e){super(e);const t=this[o.$$].proxy;(0,r.v7)(t,(()=>{t.some=(0,o.vm)({name:"未命名"})}),!0),t.isConfirmShown=!1,t.fetching=!1}confirm(){console.log("user click yes.")}cancel(){console.log("user click no.")}submitDelete(){this.fetching=!0,this.errorTip=null,new Promise(((e,t)=>setTimeout((()=>{Math.random()>.5?e():t(new Error("server error."))}),1500))).then((()=>{c.A.show("删除成功！"),this.isConfirmShown=!1,this.fetching=!1}),(e=>{this.errorTip=e.toString(),this.fetching=!1}))}}d.template=function(e){const t=e;return[(()=>{const n=(0,o.az)("div",{class:"Hb18JDKPRw8nGm1xLhih"},(0,o.Eh)("p","简单的 Popconfirm：",...(()=>{const n=(0,o.Qb)({[o.__]:{context:e[o.__].context,listeners:{confirm:{fn:function(...e){t.confirm(...e)},opts:null},cancel:{fn:function(...e){t.cancel(...e)},opts:null}},slots:{default:function(e){return[...(()=>{const t=(0,o.Qb)({[o.__]:{context:e[o.__].context,slots:{default:function(e){return[(0,o.xc)(e,"删除")]}}},class:"md-primary"}),n=_.z.create(t);return e[o.__].rootNodes.push(n),(0,o.KO)(n.__render())})()]}}},title:void 0}),r=()=>{n.title=`您确认要删除 ${t.some?.name} 吗？`};r(),t[o.$$].__watch(["some","name"],r,e[o.$$]);const s=p.create(n);return e[o.__].nonRootCompNodes.push(s),(0,o.KO)(s.__render())})()),(0,o.Eh)("p","配合服务器端 API 接口：",...(()=>{const n=(0,o.Qb)({[o.__]:{context:e[o.__].context,listeners:{"update.active":{fn:function(...e){t.isConfirmShown=e[0]},opts:null},confirm:{fn:function(...e){t.submitDelete(...e)},opts:null}},slots:{default:function(e){return[...(()=>{const t=(0,o.Qb)({[o.__]:{context:e[o.__].context,slots:{default:function(e){return[(0,o.xc)(e,"删除")]}}},class:"md-primary"}),n=_.z.create(t);return e[o.__].rootNodes.push(n),(0,o.KO)(n.__render())})()]}}},active:void 0,confirmSpinner:void 0,title:void 0,errorTip:void 0,hideWhenConfirmClick:!1}),r=()=>{n.active=t.isConfirmShown};r(),t[o.$$].__watch(["isConfirmShown"],r,e[o.$$]);const s=()=>{n.confirmSpinner=t.fetching};s(),t[o.$$].__watch(["fetching"],s,e[o.$$]);const c=()=>{n.title=`您确认要删除 ${t.some?.name} 吗？`};c(),t[o.$$].__watch(["some","name"],c,e[o.$$]);const i=()=>{n.errorTip=t.errorTip};i(),t[o.$$].__watch(["errorTip"],i,e[o.$$]);const a=p.create(n);return e[o.__].nonRootCompNodes.push(a),(0,o.KO)(a.__render())})()));return e[o.__].rootNodes.push(n),n})()]};const u={ts:"import { Attributes, Component, vm } from 'jinge';\nimport { watchForComponent } from 'jinge-i18n';\n\nimport { Snackbar } from 'jinge-material/lib/snackbar';\n\nimport _tpl from './simple.html';\n\nfunction mockDeleteApi() {\n  // mock server api\n  return new Promise<void>((resolve, reject) =>\n    setTimeout(() => {\n      if (Math.random() > 0.5) resolve();\n      else reject(new Error('server error.'));\n    }, 1500),\n  );\n}\n\nexport default class ExampleSimplePopover extends Component {\n  static template = _tpl;\n\n  isConfirmShown: boolean;\n  fetching: boolean;\n  some: { name: string };\n  errorTip: string;\n\n  constructor(attrs: Attributes) {\n    super(attrs);\n    watchForComponent(\n      this,\n      () => {\n        this.some = vm({\n          name: '未命名',\n        });\n      },\n      true,\n    );\n    this.isConfirmShown = false;\n    this.fetching = false;\n  }\n\n  confirm() {\n    // eslint-disable-next-line no-console\n    console.log('user click yes.');\n  }\n\n  cancel() {\n    // eslint-disable-next-line no-console\n    console.log('user click no.');\n  }\n\n  submitDelete() {\n    this.fetching = true;\n    this.errorTip = null;\n    mockDeleteApi().then(\n      () => {\n        Snackbar.show('删除成功！');\n        this.isConfirmShown = false;\n        this.fetching = false;\n      },\n      (err) => {\n        this.errorTip = err.toString();\n        this.fetching = false;\n      },\n    );\n  }\n}\n",sass:".demo :global p {\n  display: flex;\n  align-items: baseline;\n}\n",html:'\x3c!-- import style from \'./simple.scss\' --\x3e\n<div :class="style.demo">\n  <p>\n    简单的 Popconfirm：\n    <md-popconfirm\n      on:confirm="confirm"\n      on:cancel="cancel"\n      title="您确认要删除 ${some.name} 吗？"\n    >\n      <md-button class="md-primary">\n        删除\n      </md-button>\n    </md-popconfirm>\n  </p>\n  <p>\n    配合服务器端 API 接口：\n    <md-popconfirm\n      e:active="isConfirmShown"\n      e:hideWhenConfirmClick="false"\n      e:confirmSpinner="fetching"\n      on:update.active="isConfirmShown = $args[0]"\n      on:confirm="submitDelete"\n      title="您确认要删除 ${some.name} 吗？"\n      e:errorTip="errorTip"\n    >\n      <md-button class="md-primary">\n        删除\n      </md-button>\n    </md-popconfirm>\n  </p>\n</div>'};class h extends o.wA{constructor(e){super(e);const t=this[o.$$].proxy;(0,r.v7)(t,(()=>{t.api=(0,o.vm)({props:{headings:["名称","描述","默认值"],props:[{name:"title",description:"文字提示的内容",defaults:"an empty string"},{name:"errorTip",description:"如果指定该属性，会显示错误提示。",defaults:"null"},{name:"hideWhenConfirmClick",description:"点击确认按钮后是否隐藏气泡。",defaults:"true"},{name:"confirmSpinner",description:"是否进入正在确认的加载状态",defaults:"false"},{name:"placement",description:"同 Popover 组件",defaults:"top-end"},{name:"offset",description:"同 Popover 组件",defaults:"16"}]},events:{headings:["名称","描述","参数"],props:[{name:"confirm",description:"用户点击确认按钮",value:"undefined"},{name:"cancel",description:"用户点击取消按钮",value:"undefined"},{name:"update.active",description:"同 Popover 组件",value:"(isActive, action)"}]}})}),!0),t._examples={simple:{component:d,source:u}}}}h.template=function(e){const t=e;return[...(()=>{const n=(0,o.Qb)({[o.__]:{context:e[o.__].context,slots:{default:function(e){return[(()=>{const t=(0,o.az)("div",{class:"page-container-section"},(0,o.Eh)("p","目标元素的操作需要用户进一步的确认时，在目标元素附近弹出浮层提示，询问用户。"),(0,o.Eh)("p","和 DialogConfirm 弹出的全屏居中模态对话框相比，交互形式更轻量。"));return e[o.__].rootNodes.push(t),t})(),(()=>{const n=(0,o.az)("div",{class:"page-container-section"},(0,o.Eh)("h2","气泡确认框"),...(()=>{const n=(0,o.Qb)({[o.__]:{context:e[o.__].context},title:"Popconfirm",example:t._examples?.simple}),r=s.AA.create(n);return e[o.__].nonRootCompNodes.push(r),(0,o.KO)(r.__render())})(),...(()=>{const n=(0,o.Qb)({[o.__]:{context:e[o.__].context,slots:{default:function(e){return[...(()=>{const t=(0,o.Qb)({[o.__]:{context:e[o.__].context,slots:{default:function(e){return[(0,o.xc)(e,"Popover 组件的所有 API 也可用于 Popconfirm 组件。但部分属性的默认值不同。")]}}},tip:!0}),n=s.NW.create(t);return e[o.__].rootNodes.push(n),(0,o.KO)(n.__render())})()]},props:function(e){return[...(()=>{const n=(0,o.Qb)({[o.__]:{context:e[o.__].context},headings:void 0,props:void 0}),r=()=>{n.headings=t.api?.props?.headings};r(),t[o.$$].__watch(["api","props","headings"],r,e[o.$$]);const c=()=>{n.props=t.api?.props?.props};c(),t[o.$$].__watch(["api","props","props"],c,e[o.$$]);const i=s.FG.create(n);return e[o.__].rootNodes.push(i),(0,o.KO)(i.__render())})()]},events:function(e){return[...(()=>{const n=(0,o.Qb)({[o.__]:{context:e[o.__].context},headings:void 0,props:void 0}),r=()=>{n.headings=t.api?.events?.headings};r(),t[o.$$].__watch(["api","events","headings"],r,e[o.$$]);const c=()=>{n.props=t.api?.events?.props};c(),t[o.$$].__watch(["api","events","props"],c,e[o.$$]);const i=s.FG.create(n);return e[o.__].rootNodes.push(i),(0,o.KO)(i.__render())})()]}}},title:"API - md-popconfirm"}),r=s.IA.create(n);return e[o.__].nonRootCompNodes.push(r),(0,o.KO)(r.__render())})());return e[o.__].rootNodes.push(n),n})()]}}},centered:!0,title:"气泡确认框"}),r=s._z.create(n);return e[o.__].rootNodes.push(r),(0,o.KO)(r.__render())})()]}},4566:(e,t,n)=>{n.d(t,{$:()=>r});var o=n(4114);class r extends o.wA{constructor(e){super(e);const t=this[o.$$].proxy;t._determinate="value"in e;const n=()=>{t.value=e.value};n(),e[o.$$].__watch("value",n);const r=()=>{var n;t.size=("normal"===(n=e.size)?n=48:"small"===n?n=36:"large"===n&&(n=64),(0,o.HD)(n)&&(n=parseInt(n)),n)};r(),e[o.$$].__watch("size",r)}get value(){return this._value}set value(e){this._determinate&&(e=Number(e),this._value!==e&&(this._value=e,this.__updateIfNeed(this.attachCircleStyle)))}attachCircleStyle(){const e=this.__getRef("circle");let t=this.value;t>100?t=100:t<0&&(t=0),e.style.strokeDashoffset=2*Math.PI*22*(100-t)/100+"px"}__afterRender(){this._determinate&&this.attachCircleStyle()}}r.template=function(e){const t=e;return[(()=>{const n=(0,o.Eh)("div",(0,o.rS)("svg",{preserveAspectRatio:"xMidYMid meet",focusable:"false",viewBox:"0 0 48 48"},(()=>{const n=(0,o.rS)("circle",{"stroke-linecap":"round",cx:"50%",cy:"50%","stroke-width":"4",r:"22"});return t.__setRef("circle",n,e),n})())),r=()=>{(0,o.VT)(n,["md-spinner",t._determinate?"md-determinate":"md-indeterminate",t.class])};r(),t[o.$$].__watch(["class"],r,e[o.$$]);const s=()=>{(0,o.V7)(n,[t.style,{width:t.size,height:t.size}])};return s(),t[o.$$].__watch(["style"],s,e[o.$$]),t[o.$$].__watch(["size"],s,e[o.$$]),e[o.__].rootNodes.push(n),n})()]}}}]);